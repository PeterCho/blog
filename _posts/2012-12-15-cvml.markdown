---
layout: post
title:  "Visualizing Topics and Themes for Large Text Corpora"
date:   2012-12-15 12:00:0
categories: Topic modeling
---

Several years ago, I developed an image graph visualization tool in
collaboration with Michael Yee [1].  We initially intended the tool to
enable intuitive search of large corpera of photos and/or video frames.
But as its capabilities increased over time, I wondered how our tool could
be applied to other domains beyond computer vision.  In particular, I
thought it could be helpful for text document organization which shares
several similarities with image search.

So I started playing around with a corpus of 2012 Reuters news articles.
After duplicate raw text files were removed, O(43K) distinct documents
remained in the data set.  I converted each article into HTML and pulled
out its headline for thumbnail generation purposes.  This data set
exhibited much more diversity than a set of 1K astrophysics papers I had
previously downloaded from arXiv [2] for earlier experimentation.

Following Michael Yee's suggestion, I first used Latent Semantic Analysis
to reduce the initial set of O(28K) corpus words down to 300 linear
combinations.  Applying Term Frequency-Inverse Document Frequency (TF-IDF)
scoring to the dimensionally-reduced data then yielded a network among the
Reuters articles.  I imposed a fairly strict edge-weight threshold on the
graph and ended up with 273 connected components which had at least 10
documents.

I next googled around and stumbled upon several articles by Princeton
professor David Blei on topic modeling in general and Latent Dirichlet
Allocation in particular [3].  Blei has publically available C code which
imports sparse document-word matrices and generates topic distributions
over the word vocabulary [4].  I ran Blei's codes on each of the 273 
connected components' documents.  I was really amazed at how well the first
few dominant LDA-generated topics seem to summarize tens, hundreds and even
thousands of articles within each connected component.
                 
I wondered if the connected components could be clustered according to
basic themes.  After lots of trial and error, I finally settled upon
synthesizing "documents" from the topic keywords for each connected
component.  I then re-ran the entire pipeline described above on the new
set of 273 "topic documents".  Once the machine found a reasonable set of
clusters for the connected components, I asked it to arrange them in a
two-dimensional layout rather than in a horizontal row which I had
previously used for every Image Search System example up to that point.

Figure 1 illustrates the gross 2D organization for all the Reuters news
articles.  Only O(28K) of the original O(43K) articles appear in the graph
viewer since connected components with fewer than 10 articles are
discarded.  Each row in the figure corresponds to a set of connected
components which share some basic theme(s).

![alt text]({{ site.url }}/blog/images/topic_modeling/reuters_1a.png)
*Fig. 1.  28K+ Reuters news articles displayed within a pair of
synchronized thin and thick clients originally designed for image search.
The articles' gross 2D organization is visible in the graph viewer on the
right.  Nodes in the graph correspond to individual news articles.  The
text corresponding to the currently selected node appears on the left
inside the browser's main window.*

Figure 2a zooms into the first 3 rows of the 2D layout.  Derived topic
keywords are displayed for individual connected components in each row.  In
particular, the dominant 4 words in the top 5 topics are listed above each
connected component.  Blei's codes return all possible mappings between
words, documents and topics.  So it'd be neat if in the future a user could
select a particular topic and see its corresponding documents light up.  It
would also be interesting to display topics as word-clouds which would
eliminate repetition among topic keywords.

![alt text]({{ site.url }}/blog/images/topic_modeling/reuters_2a.png)
*Fig. 2a.  Dominant topic keywords are listed for individual connected
components within the Reuters news article graph.  Connected components
in the same row of the 2D layout share high-level topic "themes".*

Thematic relationships between connected components in the same row are
evident.  For example, the topics in row 1 are related to summer Olympic
sports; the topics in row 2 are related to the Middle East and oil; the
topics in row 3 are related to medicine and health care. As figure 2b
demonstrates, meaningful themes can also be infered for lower rows within
the 2D organization which contain fewer numbers of news article nodes.

![alt text]({{ site.url }}/blog/images/topic_modeling/reuters_2b.png)
*Fig. 2b. Topic keywords within the 6th, 7th and 8th rows of the 2D layout
for connected components in the news articles graph.  The rows are
respectively related to professional sports, oil industry and energy
production themes.*

In figure 3a, the viewer is zoomed into the second connected component of
the graph's second row.  This particular component's topic keywords all refer
to the (ongoing) Syria conflict:

![alt text]({{ site.url }}/blog/images/topic_modeling/reuters_3a.png)
*Fig. 3a.  Topics for connected component 2B within the 2D Reuters articles
organization all refer to the Syrian civil war.*

When the graph viewer is used for image search, nodes are replaced by
corresponding photo thumbnails whenever the user zooms in sufficiently so
that a manageable number of small pictures come into view.  In this text
corpus variant of the image graph visualization tool, nodes are replaced by
thumbnails displaying just the headline for their corresponding news
articles.  Figure 3b illustrates headlines for the 452 Reuters articles
within connected component 2B of the two-dimensional layout.  The headlines
all logically relate to the Syrian war:

![alt text]({{ site.url }}/blog/images/topic_modeling/reuters_3b.png)
*Fig. 3b.  Headlines for Reuters articles within connected component 2B of
the 2D layout.*

Figures 4a and 4b zoom into another connected component of the text
document graph.  As can be seen from both its topic keywords and article
headlines, this component contains news stories about the European economic
situation in 2012.

![alt text]({{ site.url }}/blog/images/topic_modeling/reuters_4a.png)
*Fig. 4a. Topics for connected component 5A within the 2D Reuters articles
organization all refer to the European economic situation.*

![alt text]({{ site.url }}/blog/images/topic_modeling/reuters_4b.png)
*Fig. 4b.  Headlines for Reuters articles within connected component 5A of
the 2D layout.*

There are obvious image analogs to nearly every step in this above document
processing pipeline.  So it'd be interesting to do similar topic and theme
modeling for large, varied corpora of digital pictures in the future.

## References

1.  P. Cho and M. Yee, *Image Search System*, 41st AIPR workshop, 2012.

2.  See www.arxiv.org/archive/astro-ph.

3.  D. Blei, A. Ng and M. Jordan, *Latent Dirichlet Allocation*, Journal of
Machine Learning Research, 2003.

4. D. Blei, *Latent Dirichlet Allocation in C*,
http://www.cs.princeton.edu/~blei/lda-c/ .




